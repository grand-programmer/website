"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[685],{9026:(e,t,n)=>{n.r(t),n.d(t,{default:()=>l});var a=n(7757),r=n.n(a);function s(e,t,n,a,r,s,i){try{var o=e[s](i),c=o.value}catch(e){return void n(e)}o.done?t(c):Promise.resolve(c).then(a,r)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function o(e){s(i,a,r,o,c,"next",e)}function c(e){s(i,a,r,o,c,"throw",e)}o(void 0)}))}}const o={readAppeals:function(){return i(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,axios.get("/api/v1/appeal");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))()},deleteAppeal:function(e){return i(r().mark((function t(){var n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,axios.delete("/api/v1/appeal/"+e);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})))()},createAuthor:function(e){return i(r().mark((function t(){var n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,axios.post("/author",e);case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})))()},readMembers:function(){return i(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,axios.get("/member");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))()},createMember:function(e){return i(r().mark((function t(){var n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,axios.post("/member",e);case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})))()},readBooks:function(){return i(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,axios.get("/book");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))()},createBook:function(e){return i(r().mark((function t(){var n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,axios.post("/book",e);case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})))()},deleteBook:function(e){return i(r().mark((function t(){var n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,axios.delete("/book/"+e);case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})))()},lendBook:function(e){return i(r().mark((function t(){var n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e),t.next=3,axios.post("/book/lend",e);case 3:return n=t.sent,t.abrupt("return",n.data);case 5:case"end":return t.stop()}}),t)})))()},readBook:function(e){return i(r().mark((function t(){var n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,axios.get("/book/"+e);case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})))()},updateBook:function(e,t){return i(r().mark((function n(){var a;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,axios.patch("/book/"+e,t);case 2:return a=n.sent,n.abrupt("return",a.data);case 4:case"end":return n.stop()}}),n)})))()}},c={data:function(){return{dialog:!1,dialogDelete:!1,headers:[{text:"Ф.И.О. / Ташкилот",sortable:!0,value:"fio",align:"start"},{text:"Мурожаат тури",sortable:!0,value:"appeal_type"},{text:"Адрес",sortable:!0,value:"address"},{text:"Email",sortable:!0,value:"email"},{text:"Телефон",value:"phone",sortable:!0},{text:"Божхона органи",value:"authority",sortable:!0},{text:"Тасниф",value:"sphere",sortable:!0},{text:"Мурожаат мазмуни",value:"text"},{text:"Амаллар",value:"actions",sortable:!1}],appeals:[],editedIndex:-1,editedItem:{id:null,fio:"",appeal_type:0,address:"",email:"",phone:0,authority:0,sphere:0,text:""},defaultItem:{id:null,fio:"",appeal_type:0,address:"",email:"",phone:0,authority:0,sphere:0,text:""}}},computed:{formTitle:function(){return-1===this.editedIndex?"Янги":"Тахрирлаш"}},watch:{dialog:function(e){e||this.close()},dialogDelete:function(e){e||this.closeDelete()}},created:function(){this.initialize()},methods:{initialize:function(){var e=this;o.readAppeals().then((function(t){e.appeals=t.data})).catch((function(e){console.log(e)}))},editItem:function(e){this.editedIndex=this.appeals.indexOf(e),this.editedItem=Object.assign({},{id:e}),this.dialog=!0},deleteItem:function(e){this.editedIndex=this.appeals.indexOf(e),this.editedItem=Object.assign({},{id:e}),this.dialogDelete=!0},deleteItemConfirm:function(){var e=this;o.deleteAppeal(this.editedItem.id).then((function(t){if(200==t.status){e.initialize();var n=e.appeals.findIndex((function(t){return t.id===e.editedItem.id}));~n&&e.appeals.splice(n,1)}})).catch((function(e){console.log(e)})),this.closeDelete()},close:function(){var e=this;this.dialog=!1,this.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}))},closeDelete:function(){var e=this;this.dialogDelete=!1,this.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}))},save:function(){this.editedIndex>-1?Object.assign(this.appeals[this.editedIndex],this.editedItem):this.appeals.push(this.editedItem),this.close()}}};const l=(0,n(1900).Z)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{id:"service-appeal",fluid:"",tag:"section"}},[n("v-row",{attrs:{justify:"center"}},[n("v-col",{attrs:{cols:"12",md:"12"}},[n("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:""}},[n("v-card",[n("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.appeals,"footer-props":{"items-per-page-text":"Сахифадаги элементлар сони"}},scopedSlots:e._u([{key:"top",fn:function(){return[n("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"text-h5"},[e._v(e._s(e.formTitle))])]),e._v(" "),n("v-card-text",[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[n("v-text-field",{attrs:{label:"Ф.И.О. / Ташкилот"},model:{value:e.editedItem.fio,callback:function(t){e.$set(e.editedItem,"fio",t)},expression:"editedItem.fio"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[n("v-text-field",{attrs:{label:"Мурожаат тури"},model:{value:e.editedItem.appeal_type,callback:function(t){e.$set(e.editedItem,"appeal_type",t)},expression:"editedItem.appeal_type"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[n("v-text-field",{attrs:{label:"Адрес"},model:{value:e.editedItem.address,callback:function(t){e.$set(e.editedItem,"address",t)},expression:"editedItem.address"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[n("v-text-field",{attrs:{label:"Email"},model:{value:e.editedItem.email,callback:function(t){e.$set(e.editedItem,"email",t)},expression:"editedItem.email"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[n("v-text-field",{attrs:{label:"Телефон"},model:{value:e.editedItem.phone,callback:function(t){e.$set(e.editedItem,"phone",t)},expression:"editedItem.phone"}})],1)],1)],1)],1),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.Ёпиш}}},[e._v("\n                                            Cancel\n                                        ")]),e._v(" "),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.save}},[e._v("\n                                            Сақлаш\n                                        ")])],1)],1)],1),e._v(" "),n("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[n("v-card",[n("v-card-title",{staticClass:"text-h5"},[e._v("Сиз хақиқатдан ҳам ўчирмоқчимисиз?")]),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeDelete}},[e._v("Ёпиш")]),e._v(" "),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.deleteItemConfirm}},[e._v("Тасдиқлайман\n                                        ")]),e._v(" "),n("v-spacer")],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(t){var a=t.item;return[n("v-icon",{attrs:{small:""},on:{click:function(t){return e.deleteItem(a.id)}}},[e._v("\n                                mdi-delete\n                            ")])]}},{key:"no-data",fn:function(){return[n("h3",[e._v("Маълумотлар топилмади")]),n("br"),e._v(" "),n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"primary"},on:{click:e.initialize}},[e._v("\n                                Янгилаш\n                            ")])]},proxy:!0}])})],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports}}]);